{"uid":"85689f11e54c4673","name":"test_check_prices[setup_browser_chrome]","fullName":"tests.test_cart_functionality#test_check_prices","historyId":"6975546b54d1585f55dc32a391de39c3","time":{"start":1683980676519,"stop":1683980735698,"duration":59179},"status":"failed","statusMessage":"AssertionError: The total price calculated incorrectly\nassert 17.98 == 8.99\n +  where 8.99 = float('8.99')","statusTrace":"setup_browser = 'setup_browser_chrome'\nrequest = <FixtureRequest for <Function test_check_prices[setup_browser_chrome]>>\n\n    @pytest.mark.parametrize('setup_browser', browsers)\n    @pytest.mark.slow\n    @allure.feature(\"Cart functionality checking\")\n    @allure.feature(\"Check prices in cart\")\n    @allure.story(\"Проверка подсчета стоимости товаров в корзине\")\n    def test_check_prices(setup_browser, request):\n        with allure.step(\"Запуск браузера и открытие страницы\"):\n            page = request.getfixturevalue(setup_browser)\n            page.goto(SelectorsProductsPage.PAGE_LINK)\n            page.wait_for_timeout(2000)\n        with allure.step(\"Добавление товаров в корзину\"):\n            products = page.query_selector_all(SelectorsProductsPage.ITEMS_SELECTOR)\n            our_products = {\n                products[i].get_attribute(\n                    SelectorsCartPage.DATA_ITEM_NAME_ATTRIBUTE).upper(): 0\n                for i in range(len(products))}\n            for i in range(len(products)):\n                products[i].click()\n                our_products[\n                    products[i].get_attribute(\n                        SelectorsCartPage.DATA_ITEM_NAME_ATTRIBUTE).upper()] += 1\n                page.wait_for_timeout(2000)\n                close_button = page.query_selector(SelectorsCartPage.CART_CLOSE_BUTTON)\n                close_button.click()\n                page.wait_for_timeout(1000)\n            products[3].click()\n            our_products[\n                products[3].get_attribute(\n                    SelectorsCartPage.DATA_ITEM_NAME_ATTRIBUTE).upper()] += 1\n            cart_link = page.query_selector(SelectorsCartPage.CART_PAGE_LINK)\n            cart_link.click()\n            page.wait_for_timeout(2000)\n        with allure.step(\"Проверка подсчитанной стоимости\"):\n            prices = page.query_selector_all(SelectorsCartPage.ITEMS_IN_CART)\n            prices_home = page.query_selector_all(SelectorsCartPage.ITEMS_SELECTOR)\n            page.wait_for_timeout(2000)\n            our_products = {prices_home[i].get_attribute(\n                SelectorsCartPage.DATA_ITEM_NAME_ATTRIBUTE).upper():\n                float(prices_home[i].get_attribute(SelectorsCartPage.DATA_ITEM_PRICE_ATTRIBUTE))\n                for i in range(len(prices_home))}\n            subtotal = 0.0\n            for i in range(len(prices)):\n                total = prices[i].query_selector(SelectorsCartPage.UNIT_PRICE)\n                total = float(total.inner_text()[1:])\n                assert total == our_products[prices[i].query_selector(\n                    SelectorsCartPage.PRODUCT_NAME).inner_text()], \\\n                    \"The price calculated incorrectly\"\n                total *= int(prices[i].query_selector(\n                    SelectorsCartPage.QUANTITY).inner_text())\n                total_price = prices[i].query_selector(\n                    SelectorsCartPage.TOTAL_PRICE).inner_text()[1:]\n>               assert total == float(total_price), \"The total price calculated incorrectly\"\nE               AssertionError: The total price calculated incorrectly\nE               assert 17.98 == 8.99\nE                +  where 8.99 = float('8.99')\n\ntests/test_cart_functionality.py:106: AssertionError","flaky":false,"newFailed":true,"newBroken":false,"newPassed":false,"retriesCount":0,"retriesStatusChange":false,"beforeStages":[{"name":"setup_browser_chrome","time":{"start":1683980676520,"stop":1683980678172,"duration":1652},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"hasContent":false,"stepsCount":0,"attachmentsCount":0}],"testStage":{"status":"failed","statusMessage":"AssertionError: The total price calculated incorrectly\nassert 17.98 == 8.99\n +  where 8.99 = float('8.99')","statusTrace":"setup_browser = 'setup_browser_chrome'\nrequest = <FixtureRequest for <Function test_check_prices[setup_browser_chrome]>>\n\n    @pytest.mark.parametrize('setup_browser', browsers)\n    @pytest.mark.slow\n    @allure.feature(\"Cart functionality checking\")\n    @allure.feature(\"Check prices in cart\")\n    @allure.story(\"Проверка подсчета стоимости товаров в корзине\")\n    def test_check_prices(setup_browser, request):\n        with allure.step(\"Запуск браузера и открытие страницы\"):\n            page = request.getfixturevalue(setup_browser)\n            page.goto(SelectorsProductsPage.PAGE_LINK)\n            page.wait_for_timeout(2000)\n        with allure.step(\"Добавление товаров в корзину\"):\n            products = page.query_selector_all(SelectorsProductsPage.ITEMS_SELECTOR)\n            our_products = {\n                products[i].get_attribute(\n                    SelectorsCartPage.DATA_ITEM_NAME_ATTRIBUTE).upper(): 0\n                for i in range(len(products))}\n            for i in range(len(products)):\n                products[i].click()\n                our_products[\n                    products[i].get_attribute(\n                        SelectorsCartPage.DATA_ITEM_NAME_ATTRIBUTE).upper()] += 1\n                page.wait_for_timeout(2000)\n                close_button = page.query_selector(SelectorsCartPage.CART_CLOSE_BUTTON)\n                close_button.click()\n                page.wait_for_timeout(1000)\n            products[3].click()\n            our_products[\n                products[3].get_attribute(\n                    SelectorsCartPage.DATA_ITEM_NAME_ATTRIBUTE).upper()] += 1\n            cart_link = page.query_selector(SelectorsCartPage.CART_PAGE_LINK)\n            cart_link.click()\n            page.wait_for_timeout(2000)\n        with allure.step(\"Проверка подсчитанной стоимости\"):\n            prices = page.query_selector_all(SelectorsCartPage.ITEMS_IN_CART)\n            prices_home = page.query_selector_all(SelectorsCartPage.ITEMS_SELECTOR)\n            page.wait_for_timeout(2000)\n            our_products = {prices_home[i].get_attribute(\n                SelectorsCartPage.DATA_ITEM_NAME_ATTRIBUTE).upper():\n                float(prices_home[i].get_attribute(SelectorsCartPage.DATA_ITEM_PRICE_ATTRIBUTE))\n                for i in range(len(prices_home))}\n            subtotal = 0.0\n            for i in range(len(prices)):\n                total = prices[i].query_selector(SelectorsCartPage.UNIT_PRICE)\n                total = float(total.inner_text()[1:])\n                assert total == our_products[prices[i].query_selector(\n                    SelectorsCartPage.PRODUCT_NAME).inner_text()], \\\n                    \"The price calculated incorrectly\"\n                total *= int(prices[i].query_selector(\n                    SelectorsCartPage.QUANTITY).inner_text())\n                total_price = prices[i].query_selector(\n                    SelectorsCartPage.TOTAL_PRICE).inner_text()[1:]\n>               assert total == float(total_price), \"The total price calculated incorrectly\"\nE               AssertionError: The total price calculated incorrectly\nE               assert 17.98 == 8.99\nE                +  where 8.99 = float('8.99')\n\ntests/test_cart_functionality.py:106: AssertionError","steps":[{"name":"Запуск браузера и открытие страницы","time":{"start":1683980676519,"stop":1683980680751,"duration":4232},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"hasContent":false,"stepsCount":0,"attachmentsCount":0},{"name":"Добавление товаров в корзину","time":{"start":1683980680751,"stop":1683980731544,"duration":50793},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"hasContent":false,"stepsCount":0,"attachmentsCount":0},{"name":"Проверка подсчитанной стоимости","time":{"start":1683980731544,"stop":1683980735698,"duration":4154},"status":"failed","statusMessage":"AssertionError: The total price calculated incorrectly\nassert 17.98 == 8.99\n +  where 8.99 = float('8.99')\n","statusTrace":"  File \"/home/runner/work/QAOPS-for-web-app/QAOPS-for-web-app/tests/test_cart_functionality.py\", line 106, in test_check_prices\n    assert total == float(total_price), \"The total price calculated incorrectly\"\n","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":true,"hasContent":true,"stepsCount":0,"attachmentsCount":0}],"attachments":[],"parameters":[],"shouldDisplayMessage":true,"hasContent":true,"stepsCount":3,"attachmentsCount":0},"afterStages":[{"name":"setup_browser_chrome::0","time":{"start":1683980735765,"stop":1683980735862,"duration":97},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"hasContent":false,"stepsCount":0,"attachmentsCount":0}],"labels":[{"name":"feature","value":"Cart functionality checking"},{"name":"feature","value":"Check prices in cart"},{"name":"story","value":"Проверка подсчета стоимости товаров в корзине"},{"name":"tag","value":"slow"},{"name":"parentSuite","value":"tests"},{"name":"suite","value":"test_cart_functionality"},{"name":"host","value":"fv-az166-948"},{"name":"thread","value":"2543-MainThread"},{"name":"framework","value":"pytest"},{"name":"language","value":"cpython3"},{"name":"package","value":"tests.test_cart_functionality"},{"name":"resultFormat","value":"allure2"}],"parameters":[{"name":"setup_browser","value":"'setup_browser_chrome'"}],"links":[],"hidden":false,"retry":false,"extra":{"severity":"normal","retries":[],"categories":[{"name":"Product defects","matchedStatuses":[],"flaky":false}],"history":{"statistic":{"failed":1,"broken":0,"skipped":0,"passed":13,"unknown":0,"total":14},"items":[{"uid":"e5b4eb0bab850a5e","reportUrl":"https://Lizardz7z.github.io/QAOPS-for-web-app/203//#testresult/e5b4eb0bab850a5e","status":"passed","time":{"start":1683939974663,"stop":1683940033227,"duration":58564}},{"uid":"c49fb01efd109d40","reportUrl":"https://Lizardz7z.github.io/QAOPS-for-web-app/202//#testresult/c49fb01efd109d40","status":"passed","time":{"start":1683894821491,"stop":1683894885509,"duration":64018}},{"uid":"f46af79b16349bd1","reportUrl":"https://Lizardz7z.github.io/QAOPS-for-web-app/201//#testresult/f46af79b16349bd1","status":"passed","time":{"start":1683894697946,"stop":1683894760650,"duration":62704}},{"uid":"410d4da64a611fe","reportUrl":"https://Lizardz7z.github.io/QAOPS-for-web-app/200//#testresult/410d4da64a611fe","status":"passed","time":{"start":1683894409208,"stop":1683894467029,"duration":57821}},{"uid":"630c815a51f5507a","reportUrl":"https://Lizardz7z.github.io/QAOPS-for-web-app/199//#testresult/630c815a51f5507a","status":"passed","time":{"start":1683889065411,"stop":1683889123374,"duration":57963}},{"uid":"35d9b13b53e857e4","reportUrl":"https://Lizardz7z.github.io/QAOPS-for-web-app/198//#testresult/35d9b13b53e857e4","status":"passed","time":{"start":1683887972816,"stop":1683888034545,"duration":61729}},{"uid":"155ec55505bc0343","reportUrl":"https://Lizardz7z.github.io/QAOPS-for-web-app/197//#testresult/155ec55505bc0343","status":"passed","time":{"start":1683887655349,"stop":1683887717901,"duration":62552}},{"uid":"4d2ebbcdc372058d","reportUrl":"https://Lizardz7z.github.io/QAOPS-for-web-app/196//#testresult/4d2ebbcdc372058d","status":"passed","time":{"start":1683887336030,"stop":1683887395317,"duration":59287}},{"uid":"6ce375424aab5470","reportUrl":"https://Lizardz7z.github.io/QAOPS-for-web-app/195//#testresult/6ce375424aab5470","status":"passed","time":{"start":1683887241737,"stop":1683887299629,"duration":57892}},{"uid":"641eed5afbd4d76c","reportUrl":"https://Lizardz7z.github.io/QAOPS-for-web-app/194//#testresult/641eed5afbd4d76c","status":"passed","time":{"start":1683885300555,"stop":1683885359170,"duration":58615}},{"uid":"8f62946b8b36647c","reportUrl":"https://Lizardz7z.github.io/QAOPS-for-web-app/193//#testresult/8f62946b8b36647c","status":"passed","time":{"start":1683879463908,"stop":1683879526686,"duration":62778}},{"uid":"1f61c97ecbbe50af","reportUrl":"https://Lizardz7z.github.io/QAOPS-for-web-app/189//#testresult/1f61c97ecbbe50af","status":"passed","time":{"start":1683876340269,"stop":1683876397978,"duration":57709}},{"uid":"f8f38543a1fed487","reportUrl":"https://Lizardz7z.github.io/QAOPS-for-web-app/187//#testresult/f8f38543a1fed487","status":"passed","time":{"start":1683874836049,"stop":1683874896605,"duration":60556}}]},"tags":["slow"]},"source":"85689f11e54c4673.json","parameterValues":["'setup_browser_chrome'"]}