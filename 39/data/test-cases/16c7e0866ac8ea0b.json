{"uid":"16c7e0866ac8ea0b","name":"test_add_to_cart","fullName":"tests.test_cart_functionality#test_add_to_cart","historyId":"4893d6945592856cf0db793d92c6a14a","time":{"start":1683131885123,"stop":1683131936953,"duration":51830},"status":"broken","statusMessage":"KeyError: 'COLUMBIA MEDIUM ROAST'","statusTrace":"setup_browser = <Page url='https://impresso-expresso.netlify.app/products#!/cart'>\n\n    @allure.feature(\"Cart functionality checking\")\n    @pytest.mark.slow\n    @allure.feature(\"Check goods adding to the cart\")\n    @allure.story(\"Проверка функции добавления товаров в корзину\")\n    def test_add_to_cart(setup_browser):\n        with allure.step(\"Запуск браузера и открытие страницы\"):\n            page = setup_browser\n        with allure.step(\"Переход на страницу 'продукты'\"):\n            link = page.query_selector(selectors_products_page.PRODUCTS_PAGE_LINK)\n            link.click()\n            page.wait_for_timeout(2000)\n        with allure.step(\"Добавление товаров в корзину\"):\n            products = page.query_selector_all(selectors_products_page.ITEMS_SELECTOR)\n            our_products = {\n                products[i].get_attribute(\n                    selectors_cart_page.DATA_ITEM_NAME_ATTRIBUTE).upper(): 0\n                            for i in range(len(products))}\n            for i in range(len(products)):\n                products[i].click()\n                our_products[\n                    products[i].get_attribute(\n                        selectors_cart_page.DATA_ITEM_NAME_ATTRIBUTE).upper()] += 1\n                page.wait_for_timeout(2000)\n                close_button = page.query_selector(selectors_cart_page.CART_CLOSE_BUTTON)\n                close_button.click()\n                page.wait_for_timeout(1000)\n            products[3].click()\n            our_products[\n                products[3].get_attribute(\n                    selectors_cart_page.DATA_ITEM_NAME_ATTRIBUTE).upper()] += 1\n            cart_link = page.query_selector(selectors_cart_page.CART_PAGE_LINK)\n            cart_link.click()\n            page.wait_for_timeout(2000)\n            products_in_cart = page.query_selector_all(selectors_cart_page.ITEMS_IN_CART)\n            products_names_in_cart = {}\n        with allure.step(\"Проверка правильности добавления товаров\"):\n            for i in range(len(products_in_cart)):\n                products_names_in_cart[\n                    products_in_cart[i].query_selector(\n                        selectors_cart_page.PRODUCT_NAME).inner_text()] = \\\n                    int(products_in_cart[i].query_selector(selectors_cart_page.QUANTITY).inner_text())\n            for i in our_products.items():\n>               assert products_names_in_cart[i[0]] == i[1], \\\n                    \"Products added to cart incorrectly\"\nE               KeyError: 'COLUMBIA MEDIUM ROAST'\n\ntests/test_cart_functionality.py:48: KeyError","flaky":false,"newFailed":false,"newBroken":true,"newPassed":false,"retriesCount":1,"retriesStatusChange":true,"beforeStages":[{"name":"setup_browser","time":{"start":1683131881510,"stop":1683131885122,"duration":3612},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"attachmentsCount":0,"shouldDisplayMessage":false,"hasContent":false}],"testStage":{"status":"broken","statusMessage":"KeyError: 'COLUMBIA MEDIUM ROAST'","statusTrace":"setup_browser = <Page url='https://impresso-expresso.netlify.app/products#!/cart'>\n\n    @allure.feature(\"Cart functionality checking\")\n    @pytest.mark.slow\n    @allure.feature(\"Check goods adding to the cart\")\n    @allure.story(\"Проверка функции добавления товаров в корзину\")\n    def test_add_to_cart(setup_browser):\n        with allure.step(\"Запуск браузера и открытие страницы\"):\n            page = setup_browser\n        with allure.step(\"Переход на страницу 'продукты'\"):\n            link = page.query_selector(selectors_products_page.PRODUCTS_PAGE_LINK)\n            link.click()\n            page.wait_for_timeout(2000)\n        with allure.step(\"Добавление товаров в корзину\"):\n            products = page.query_selector_all(selectors_products_page.ITEMS_SELECTOR)\n            our_products = {\n                products[i].get_attribute(\n                    selectors_cart_page.DATA_ITEM_NAME_ATTRIBUTE).upper(): 0\n                            for i in range(len(products))}\n            for i in range(len(products)):\n                products[i].click()\n                our_products[\n                    products[i].get_attribute(\n                        selectors_cart_page.DATA_ITEM_NAME_ATTRIBUTE).upper()] += 1\n                page.wait_for_timeout(2000)\n                close_button = page.query_selector(selectors_cart_page.CART_CLOSE_BUTTON)\n                close_button.click()\n                page.wait_for_timeout(1000)\n            products[3].click()\n            our_products[\n                products[3].get_attribute(\n                    selectors_cart_page.DATA_ITEM_NAME_ATTRIBUTE).upper()] += 1\n            cart_link = page.query_selector(selectors_cart_page.CART_PAGE_LINK)\n            cart_link.click()\n            page.wait_for_timeout(2000)\n            products_in_cart = page.query_selector_all(selectors_cart_page.ITEMS_IN_CART)\n            products_names_in_cart = {}\n        with allure.step(\"Проверка правильности добавления товаров\"):\n            for i in range(len(products_in_cart)):\n                products_names_in_cart[\n                    products_in_cart[i].query_selector(\n                        selectors_cart_page.PRODUCT_NAME).inner_text()] = \\\n                    int(products_in_cart[i].query_selector(selectors_cart_page.QUANTITY).inner_text())\n            for i in our_products.items():\n>               assert products_names_in_cart[i[0]] == i[1], \\\n                    \"Products added to cart incorrectly\"\nE               KeyError: 'COLUMBIA MEDIUM ROAST'\n\ntests/test_cart_functionality.py:48: KeyError","steps":[{"name":"Запуск браузера и открытие страницы","time":{"start":1683131885123,"stop":1683131885123,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"attachmentsCount":0,"shouldDisplayMessage":false,"hasContent":false},{"name":"Переход на страницу 'продукты'","time":{"start":1683131885123,"stop":1683131887256,"duration":2133},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"attachmentsCount":0,"shouldDisplayMessage":false,"hasContent":false},{"name":"Добавление товаров в корзину","time":{"start":1683131887256,"stop":1683131936431,"duration":49175},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"attachmentsCount":0,"shouldDisplayMessage":false,"hasContent":false},{"name":"Проверка правильности добавления товаров","time":{"start":1683131936431,"stop":1683131936953,"duration":522},"status":"broken","statusMessage":"KeyError: 'COLUMBIA MEDIUM ROAST'\n","statusTrace":"  File \"/home/runner/work/QAOPS-for-web-app/QAOPS-for-web-app/tests/test_cart_functionality.py\", line 48, in test_add_to_cart\n    assert products_names_in_cart[i[0]] == i[1], \\\n","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"attachmentsCount":0,"shouldDisplayMessage":true,"hasContent":true}],"attachments":[],"parameters":[],"stepsCount":4,"attachmentsCount":0,"shouldDisplayMessage":true,"hasContent":true},"afterStages":[{"name":"setup_browser::0","time":{"start":1683131936962,"stop":1683131937034,"duration":72},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"attachmentsCount":0,"shouldDisplayMessage":false,"hasContent":false}],"labels":[{"name":"story","value":"Проверка функции добавления товаров в корзину"},{"name":"feature","value":"Cart functionality checking"},{"name":"feature","value":"Check goods adding to the cart"},{"name":"tag","value":"slow"},{"name":"parentSuite","value":"tests"},{"name":"suite","value":"test_cart_functionality"},{"name":"host","value":"fv-az454-927"},{"name":"thread","value":"2566-MainThread"},{"name":"framework","value":"pytest"},{"name":"language","value":"cpython3"},{"name":"package","value":"tests.test_cart_functionality"},{"name":"resultFormat","value":"allure2"}],"parameters":[],"links":[],"hidden":false,"retry":false,"extra":{"severity":"normal","retries":[{"uid":"aa6e3711eb221500","status":"passed","time":{"start":1682530461182,"stop":1682530516465,"duration":55283}}],"categories":[{"name":"Test defects","matchedStatuses":[],"flaky":false}],"history":{"statistic":{"failed":0,"broken":1,"skipped":0,"passed":2,"unknown":0,"total":3},"items":[{"uid":"10c066405edbbe61","reportUrl":"https://Lizardz7z.github.io/QAOPS-for-web-app/38//#testresult/10c066405edbbe61","status":"passed","time":{"start":1683131600349,"stop":1683131651658,"duration":51309}},{"uid":"923e4aba84268646","reportUrl":"https://Lizardz7z.github.io/QAOPS-for-web-app/38//#testresult/923e4aba84268646","status":"passed","time":{"start":1682530461182,"stop":1682530516465,"duration":55283}}]},"tags":["slow"]},"source":"16c7e0866ac8ea0b.json","parameterValues":[]}